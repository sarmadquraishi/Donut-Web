{"ast":null,"code":"const handleAddToCart = async product => {\n  try {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      toast.error('Please login first!');\n      navigate('/login');\n      return;\n    }\n    console.log('Adding to cart:', product._id);\n    const response = await axios.post(`${process.env.REACT_APP_API_URL || 'http://localhost:5000/api'}/cart`, {\n      productId: product._id,\n      quantity: 1\n    }, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    console.log('Cart response:', response.data);\n    if (response.status === 201 || response.status === 200) {\n      toast.success(`${product.name} added to cart!`);\n    } else {\n      toast.error('Failed to add to cart');\n    }\n  } catch (error) {\n    console.error('Add to cart error:', error.response || error);\n\n    // Show helpful error message\n    if (error.response) {\n      if (error.response.status === 401) {\n        toast.error('Session expired. Please login again.');\n        localStorage.removeItem('token');\n        navigate('/login');\n      } else if (error.response.status === 404) {\n        toast.error('Product not found');\n      } else {\n        var _error$response$data;\n        toast.error(`Error: ${((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to add to cart'}`);\n      }\n    } else if (error.request) {\n      toast.error('Network error. Check if backend is running.');\n    } else {\n      toast.error('Error: ' + error.message);\n    }\n  }\n};","map":{"version":3,"names":["handleAddToCart","product","token","localStorage","getItem","toast","error","navigate","console","log","_id","response","axios","post","process","env","REACT_APP_API_URL","productId","quantity","headers","data","status","success","name","removeItem","_error$response$data","request","message"],"sources":["E:/Donut-Web/frontend/src/pages/Home.js"],"sourcesContent":["const handleAddToCart = async (product) => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    if (!token) {\r\n      toast.error('Please login first!');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    \r\n    console.log('Adding to cart:', product._id);\r\n    \r\n    const response = await axios.post(\r\n      `${process.env.REACT_APP_API_URL || 'http://localhost:5000/api'}/cart`,\r\n      { \r\n        productId: product._id, \r\n        quantity: 1 \r\n      },\r\n      { \r\n        headers: { \r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        } \r\n      }\r\n    );\r\n    \r\n    console.log('Cart response:', response.data);\r\n    \r\n    if (response.status === 201 || response.status === 200) {\r\n      toast.success(`${product.name} added to cart!`);\r\n    } else {\r\n      toast.error('Failed to add to cart');\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('Add to cart error:', error.response || error);\r\n    \r\n    // Show helpful error message\r\n    if (error.response) {\r\n      if (error.response.status === 401) {\r\n        toast.error('Session expired. Please login again.');\r\n        localStorage.removeItem('token');\r\n        navigate('/login');\r\n      } else if (error.response.status === 404) {\r\n        toast.error('Product not found');\r\n      } else {\r\n        toast.error(`Error: ${error.response.data?.error || 'Failed to add to cart'}`);\r\n      }\r\n    } else if (error.request) {\r\n      toast.error('Network error. Check if backend is running.');\r\n    } else {\r\n      toast.error('Error: ' + error.message);\r\n    }\r\n  }\r\n};"],"mappings":"AAAA,MAAMA,eAAe,GAAG,MAAOC,OAAO,IAAK;EACzC,IAAI;IACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,IAAI,CAACF,KAAK,EAAE;MACVG,KAAK,CAACC,KAAK,CAAC,qBAAqB,CAAC;MAClCC,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;IAEAC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAER,OAAO,CAACS,GAAG,CAAC;IAE3C,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAI,CAC/B,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B,OAAO,EACtE;MACEC,SAAS,EAAEhB,OAAO,CAACS,GAAG;MACtBQ,QAAQ,EAAE;IACZ,CAAC,EACD;MACEC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAE,UAAUjB,KAAK;MAClC;IACF,CACF,CAAC;IAEDM,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEE,QAAQ,CAACS,IAAI,CAAC;IAE5C,IAAIT,QAAQ,CAACU,MAAM,KAAK,GAAG,IAAIV,QAAQ,CAACU,MAAM,KAAK,GAAG,EAAE;MACtDhB,KAAK,CAACiB,OAAO,CAAC,GAAGrB,OAAO,CAACsB,IAAI,iBAAiB,CAAC;IACjD,CAAC,MAAM;MACLlB,KAAK,CAACC,KAAK,CAAC,uBAAuB,CAAC;IACtC;EAEF,CAAC,CAAC,OAAOA,KAAK,EAAE;IACdE,OAAO,CAACF,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAACK,QAAQ,IAAIL,KAAK,CAAC;;IAE5D;IACA,IAAIA,KAAK,CAACK,QAAQ,EAAE;MAClB,IAAIL,KAAK,CAACK,QAAQ,CAACU,MAAM,KAAK,GAAG,EAAE;QACjChB,KAAK,CAACC,KAAK,CAAC,sCAAsC,CAAC;QACnDH,YAAY,CAACqB,UAAU,CAAC,OAAO,CAAC;QAChCjB,QAAQ,CAAC,QAAQ,CAAC;MACpB,CAAC,MAAM,IAAID,KAAK,CAACK,QAAQ,CAACU,MAAM,KAAK,GAAG,EAAE;QACxChB,KAAK,CAACC,KAAK,CAAC,mBAAmB,CAAC;MAClC,CAAC,MAAM;QAAA,IAAAmB,oBAAA;QACLpB,KAAK,CAACC,KAAK,CAAC,UAAU,EAAAmB,oBAAA,GAAAnB,KAAK,CAACK,QAAQ,CAACS,IAAI,cAAAK,oBAAA,uBAAnBA,oBAAA,CAAqBnB,KAAK,KAAI,uBAAuB,EAAE,CAAC;MAChF;IACF,CAAC,MAAM,IAAIA,KAAK,CAACoB,OAAO,EAAE;MACxBrB,KAAK,CAACC,KAAK,CAAC,6CAA6C,CAAC;IAC5D,CAAC,MAAM;MACLD,KAAK,CAACC,KAAK,CAAC,SAAS,GAAGA,KAAK,CAACqB,OAAO,CAAC;IACxC;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}